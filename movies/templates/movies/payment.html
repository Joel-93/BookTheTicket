{% extends "users/base.html" %}
{% block content %}

<div class="container text-center py-5">
  <h3>Processing Payment</h3>
  <p>{{ theater.movie.name }} â€“ {{ theater.name }}</p>

  <button id="rzp-button" class="btn btn-primary btn-lg">
    Pay Now
  </button>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
var options = {
  key: "{{ razorpay_key }}",
  amount: "{{ amount }}",
  currency: "INR",
  name: "BookTheTicket",
  description: "Movie Ticket Booking",
  order_id: "{{ order.id }}",

  handler: function (response) {
    window.location.href = "{% url 'payment_success' %}";
  },

  prefill: {
    email: "{{ request.user.email }}",
    contact: "9999999999"
  },

  theme: {
    color: "#003cff"
  }
};

var rzp = new Razorpay(options);

document.getElementById("rzp-button").onclick = function(e){
  rzp.open();
  e.preventDefault();
}
</script>

{% endblock %}
