{% extends 'users/base.html' %}
{% block content %}
  <div class="container py-5">
    <!-- MOVIE HEADER -->
    <div class="row mb-5 align-items-center">
      <div class="col-lg-8">
        <h2 class="fw-bold">{{ movie.name }}</h2>
        <p class="text-muted mb-2">{{ movie.genre }} ‚Ä¢ {{ movie.language }} ‚Ä¢ ‚≠ê {{ movie.rating }}</p>
        <p class="text-muted">{{ movie.description }}</p>
      </div>

      <div class="col-lg-4 text-center">
        <img src="{{ movie.image.url }}" class="img-fluid rounded-3 shadow" style="max-height:260px; object-fit:cover;" />
      </div>
    </div>

    <!-- üé¨ TRAILER SECTION -->
    {% if movie.trailer_url %}
      <div class="mb-5">
        <h4 class="fw-semibold mb-3">üé¨ Watch Trailer</h4>

        <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
          <iframe src="{{ movie.get_trailer_embed_url }}" 
                  style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen>
          </iframe>
        </div>
      </div>
    {% endif %}

    <!-- THEATERS -->
    <h4 class="fw-semibold mb-3">Select Theatre & Showtime</h4>

    {% if theaters %}
      {% for theater in theaters %}
        <div class="theatre-card mb-4">
          <div class="d-flex justify-content-between align-items-start flex-wrap">
            <div>
              <h5 class="fw-semibold mb-2">{{ theater.name }} Theatre</h5>

              <div class="theatre-icons">
                <span><i class="fas fa-mobile-alt"></i> M-Ticket</span>
                <span><i class="fas fa-utensils"></i> Food</span>
                <span><i class="fas fa-parking"></i> Parking</span>
                <span><i class="fas fa-wheelchair"></i> Access</span>
                <span><i class="fas fa-glasses"></i> 3D</span>
              </div>
            </div>

            <div class="text-end mt-3 mt-md-0">
              <a href="{% url 'book_seats' theater.id %}" class="time-btn">
                {{ theater.time }}
                <small>Book Now</small>
              </a>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-muted">No theatres available.</p>
    {% endif %}
  </div>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    .theatre-card {
      background: #fff;
      border-radius: 14px;
      padding: 22px;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.08);
    }
    
    .theatre-icons {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      font-size: 14px;
      color: #555;
    }
    
    .theatre-icons i {
      color: #003cff;
    }
    
    .time-btn {
      border: 2px solid #003cff;
      border-radius: 10px;
      padding: 10px 16px;
      color: #003cff;
      text-decoration: none;
      font-weight: 600;
    }
    
    .time-btn:hover {
      background: #003cff;
      color: #fff;
    }
  </style>
{% endblock %}
